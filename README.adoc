= Bachelor thesis

image:https://gitlab.com/oskopek/TransportEditor/badges/master/build.svg["GitLab Build Status", link="https://gitlab.com/oskopek/TransportEditor/commits/master"]
image:https://gitlab.com/oskopek/TransportEditor/badges/master/coverage.svg["GitLab Coverage Report", link="https://gitlab.com/oskopek/TransportEditor/commits/master"]
image:https://www.ohloh.net/p/TransportEditor/widgets/project_thin_badge.gif["Ohloh widget", link="https://www.ohloh.net/p/TransportEditor"]

My Bachelor thesis and individual software project, TransportEditor.

TransportEditor aims to be a problem editor and plan visualizer for the Transport domain from the IPC 2008. The goal is to create an intuitive GUI desktop application for making quick changes and re-planning, but also designing a new problem dataset from scratch.

////
=== Screenshot
image:docs/img/screenshot.png["TransportEditor screenshot", scalewidth="20%"]
////

=== Getting help

*For users looking for help*: a manual describing all possible features of TransportEditor is available in the app itself:
in the upper menu bar item *Help -> Help*.

Post any development questions or comments you may have on Stack Overflow and/or don't hesitate to
https://github.com/oskopek/TransportEditor/issues[open an issue].

=== Running TransportEditor releases

* Download a release from https://github.com/oskopek/TransportEditor/releases[]
* To directly run TransportEditor, download the *executable JAR file*: `TransportEditor-VERSION-jar-with-dependencies.jar`
* If you want to run a release, just try: `java -jar TransportEditor-VERSION-jar-with-dependencies.jar`

=== Building & running TransportEditor

* See the section (further down) on How-to setup your *build environment* first.
* *Recommended*: `mvn clean install -DskipTests`
* To run *unit tests*: `mvn clean install`
* To run *integration tests*: `mvn clean install -Pit`
* To *clean*, run: `mvn clean`
* To build *docs* too: `mvn clean install -Pdocs`
* *Run TransportEditor*:
** If you followed the build environment setup and want to run your version of TransportEditor,
run `mvn exec:java` from the main project directory.
** If you want to run a translated version of TransportEditor, set your system locale accordingly and restart TransportEditor.
If you want to try out a translated version (on Linux), try: `LC_ALL="LOCALE" java -jar TransportEditor.jar`, where
`LOCALE` is any locale available on your system (run `locale -a` to view all available).

TransportEditor uses http://semver.org/[semantic versioning].

=== Setup your build environment

==== Linux & Mac

. *Install Git*
** Fedora: `sudo dnf install git`
** Ubuntu: `sudo apt-get install git`

. *Install Java8 JDK* -- link:http://www.oracle.com/technetwork/java/javase/downloads/index.html[Oracle JDK Downloads] -- Select: Java Platform (JDK)
** *NOTE*: You need `jdk-8u40` or newer (JavaFX 8 dependency).

. *Install Maven* -- preferably the latest version you can.
Usually, your distribution's package management repository is enough:
** Fedora: `sudo dnf install mvn`
** Ubuntu: `sudo apt-get install maven`

. *Fork the repository* -- Create a fork of the link:https://github.com/oskopek/TransportEditor/[oskopek/TransportEditor repository]
(right upper corner) on GitHub, usually the fork will be called: `yourusername/TransportEditor`.

. *Clone the your fork* -- run `git clone https://github.com/yourusername/TransportEditor.git`
 (or, preferably, use SSH: `git clone git@github.com:yourusername/TransportEditor.git`)

. *Run the build* (see the Building section)

==== Windows

. *Install Java8 JDK* -- link:http://www.oracle.com/technetwork/java/javase/downloads/index.html[Oracle JDK Downloads] -- Select: Java Platform (JDK)

. *Install Maven* -- (preferably the latest version you can).
See: http://maven.apache.org/guides/getting-started/windows-prerequisites.html[Maven on Windows]
 and http://maven.apache.org/download.cgi[Maven Downloads].

. Download and install GitHub for Windows at http://windows.github.com/[]. If you encounter any problems,
see the http://windows.github.com/help.html[GitHub for Windows FAQ].

. Find the `oskopek/TransportEditor` https://github.com/oskopek/TransportEditor[repository] on GitHub.

. Create a fork of the repository (right upper corner), usually the fork will be called `yourusername/TransportEditor`.

. *Run the build* (see the Building section)

. The following workflow may be useful for you, if you're not familiar with Git/GitHub for Windows:

.. In the upper left window, you can view all uncommitted changes.
Write the name and description of your changes and click the *check* button.

.. Once in a while, be sure to *sync* to send all commits to your GitHub fork.

.. After testing your changes, submit a pull request to `oskopek/TransportEditor` through https://github.com/oskopek/TransportEditor/compare[GitHub].
... Click on compare across forks.
... Set the following:
**** base fork: `oskopek/TransportEditor`
**** base: `master`
**** head fork: `yourusername/TransportEditor`
**** compare: `branchname`

.. Click on *Click to create a pull request for this comparison*.

.. Our Travis continuous integration server will test the merge of your pull request.
You can view the results in the thread of the pull request.

.. Congratulations! Your pull request will get reviewed and probably be merged in.

=== Submitting an Issue

We use the https://github.com/oskopek/TransportEditor/issues[GitHub issue tracker] to track bugs and features. Before
submitting a bug report or feature request, check to make sure it hasn't
already been submitted. When submitting a bug report, please include a https://gist.github.com/[Gist]
that includes a stack trace and any details that may be necessary to reproduce
the bug, including your Java version and operating system.

=== Contributing

**NO CONTRIBUTIONS ARE ACCEPTED AT THIS TIME, THIS IS A CLASSROOM PROJECT.**

*Everyone* is encouraged to help improve this project.

Here are some ways *you* can contribute:

* by using alpha, beta, and pre-release versions
* by reporting bugs
* by suggesting new features
* by translating to a new language
* by link:transporteditor-editor/docs/howto-write-documentation.adoc[writing or editing documentation]
* by writing specifications
* by writing code (*no patch is too small*: fix typos, add comments, clean up inconsistent whitespace)
* by refactoring code
* by closing https://github.com/oskopek/TransportEditor/issues[issues]
* by reviewing patches

=== Submitting a Pull Request
. http://help.github.com/fork-a-repo/[Fork the repository]
. http://learn.github.com/p/branching.html[Create a topic branch]
. Optional: To ease the process of contributing code back into TransportEditor,
please set-up https://github.com/oskopek/ide-config[IDE coding templates] first
. Implement your feature or bug fix
. If applicable, add tests and documentation for your feature or bug fix
(see link:transporteditor-editor/docs/howto-write-documentation.adoc[How-to write documentation])
. Run `mvn clean install -Pit`
. If the tests fail, return to step 3 and 4
. Add, commit, and push your changes
. http://help.github.com/send-pull-requests/[Submit a pull request]

=== Short design description

The model for the Transport domain is pretty complicated,
because it handles:

* Multiple variants of the Transport domain
* Planning and visualization with the same model

That's what this short section is for -- describing the ideas behind the model, so that reading the code
afterwards is easier.

The model is split into 4 parts:

* Session
* Domain
* Problem
* Plan

Lets start from the end.

==== Plan

The plan consists of an ordered list of actions.
There are two types of plans:

* Sequential - these plans are strictly linear, actions do not overlap. (simple doubly linked list)
* Temporal - every action in this plan has a time interval in which it takes place. This plan is basically a Guava RangeMap.
(Guava Range Map)

===== Visualizing plans

There are two ways to visualize both plan types:

* "Gantt chart"
** Sequential: list
** Temporal: 2d list (one axis time, the other an actionobject)

* "Graph"
** Sequential: path with relationships to other tasks (precondition blockers) as edges
** Temporal: graph (nodes sorted by time - find a visually pleasing way) with relationships to other tasks (precondition blockers) as edges

==== Persisting plans

Using simple java code and a lot of micro-hacks it is persisted into a VAL-like format.
For parsing, we assume a correct and valid VAL-like plan. A very very simple Regex-based approach is used.

==== Problem

The problem is basically a graph (with multiple possible layers, f.e. fuel), a vehicle and package map.

Fuel is added as different graph edge type (FuelRoad instead of DefaultRoad) + FuelVehicle instead of vehicle.
If the domain is fuel enabled, the fuel layer of the graph + everything else will be checked thoroughly.

===== Visualizing problems

Problems are very similar between domains. Just  different way of showing the tooltips/graph.

==== Persisting problems

Using a freemarker template and a lot of micro-hacks it is persisted into PDDL.
For parsing, we assume a correct and valid problem. A very very simple Regex-based approach is used.

==== Domain

There is basically only one domain type: VariantDomain.
The domain has basically flags, telling which parts are enabled and which are not.
The visualizer, verifier, reader/writer (and planner, of course) take this into account.

===== Visualizing domains

Domains are not visualized per se, just their parts.

==== Persisting domains

Using a freemarker template and a lot of micro-hacks it is persisted into PDDL.
For parsing, we assume a correct and valid domain. A very very simple Regex-based approach is used.

==== Session

The session is where it all comes together. It keeps an instance of the domain, problem and plan (and planner).
It enforces a lot of rules about what can be done when.

===== Visualizing sessions

N/A

==== Persisting sessions

One word: XStream.






